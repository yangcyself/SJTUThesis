%%
%% This is file `sjtuthesis-undergraduate.ltx',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% sjtuthesis.dtx  (with options: `undergraduate')
%% 
%% Copyright (C) 2009-2017 by weijianwen <weijianwen@gmail.com>
%%           (C) 2018-2020 by SJTUG
%% 
%% This file may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version 1.3c
%% of this license or (at your option) any later version.
%% The latest version of this license is in
%%     https://www.latex-project.org/lppl.txt
%% and version 1.3c or later is part of all distributions of LaTeX
%% version 2005/12/01 or later.
%% 
%% This file has the LPPL maintenance status "maintained".
%% 
%% The Current Maintainer of this work is Alexara Wu.
%% 
\ProvidesFile{sjtuthesis-undergraduate.ltx}
  [2019/06/16 1.0.0rc Shanghai Jiao Tong University Thesis Template]
\ifsjtu@degree@course
  \sjtu@name@def{degree@type@zh}{}
  \sjtu@name@def{degree@type@en}{}
\else
  \sjtu@name@def{degree@type@zh}{学士}
  \sjtu@name@def{degree@type@en}{Bachelor}
\fi
\sjtu@name@def{author@zh}{学生姓名}
\sjtu@name@def{id@zh}{学生学号}
\sjtu@name@def{supervisor@zh}{指导教师}
\sjtu@name@def{coursename@zh}{课程名称}
\sjtu@name@def{major@zh}{专业}
\sjtu@name@def{department@zh}{学院(系)}
\ifsjtu@degree@course
  \sjtu@name@def{thesis@type}{课程论文}
  \let\sjtu@name@thesis@kind\sjtu@name@thesis@type
  \sjtu@name@def{subject@zh}{\sjtu@name@thesis@type}
  \sjtu@name@def{subject@en}{Course Paper}
\else
  \sjtu@name@def{thesis@type}{学位论文}
  \sjtu@name@def{thesis@kind}{毕业设计（论文）}
  \sjtu@name@def{subject@zh}{\sjtu@name@degree@type@zh\sjtu@name@thesis@type}
  \sjtu@name@def{subject@en}{Thesis of \sjtu@name@degree@type@en}
\fi
\sjtu@name@def{bigabstract}{英文大摘要}
\geometry{%
  paper      = a4paper,
  vmargin    = {84bp, 72bp},
  hmargin    = 90bp,
  headheight = 60bp,
  headsep    = 12bp,
}
\ifsjtu@language@english
  \def\sjtu@titlemark{\sjtu@info@title@en}
  \newcommand{\sjtu@fancyhead}{%
    \parbox[b]{0.75\textwidth}{%
      \raggedleft\nouppercase{\footnotesize\heiti\sjtu@titlemark}}}
  \newcommand{\sjtu@fancyfoot}[2]{%
    \small --~~Page~~{\bfseries{#1}}~~of~~{\bfseries{#2}}~~--}
\else
  \def\sjtu@titlemark{\sjtu@info@title}
  \newcommand{\sjtu@fancyhead}{%
    \parbox[b]{0.75\textwidth}{%
      \raggedleft\nouppercase{\small\heiti\sjtu@titlemark}}}
  \newcommand{\sjtu@fancyfoot}[2]{%
    \small 第~{\bfseries{#1}}~页\,共~{\bfseries{#2}}~页}
\fi
\fancypagestyle{sjtu@plain}{%
  \fancyhf{}
  \fancyhead[L]{\includegraphics[height=32pt]{sjtu-vi-logo-\sjtu@format@header@logo@color.pdf}}
  \fancyhead[R]{\sjtu@fancyhead}
  \fancyfoot[C]{\sjtu@fancyfoot{\sjtu@thepage}{\sjtu@lastpageref}}
}
\ctexset{%
  subsection/format = \zihao{-4}\normalfont,
}
\renewcommand{\cftchapfont}{\normalfont}
\renewcommand{\cftchapleader}{\normalfont\cftdotfill{\cftdotsep}}
\renewcommand{\cftchappagefont}{\normalfont}
\NewDocumentEnvironment{abstract}{}{%
  \cleardoublepage
  \pdfbookmark[0]{\sjtu@name@abstract}{abstract}
  \chapter*{%
    \sjtu@info@title \vskip 2ex
    \begingroup
      \zihao{4}
      \sjtu@name@abstract@zh
    \endgroup
  }
  \@mkboth{\sjtu@name@abstract@zh}%
          {\sjtu@name@abstract@zh}%
}{%
  \vskip 3ex \noindent
  \begingroup
    \zihao{-4}
    \heiti\sjtu@name@keywords@zh
  \endgroup
  \begingroup
    \zihao{5}
    \sjtu@info@keywords
  \endgroup
}
\NewDocumentEnvironment{enabstract}{}{%
  \cleardoublepage
  \chapter*{%
    \MakeUppercase\sjtu@info@title@en \vskip 2ex
    \begingroup
      \zihao{4}
      \MakeUppercase\sjtu@name@abstract@en
    \endgroup
  }
  \@mkboth{\sjtu@name@abstract@en}%
          {\sjtu@name@abstract@en}%
}{%
  \vskip 3ex \noindent
  \begingroup
    \zihao{-4}\bfseries
    \sjtu@name@keywords@en
  \endgroup
  \begingroup
    \zihao{5}
    \sjtu@info@keywords@en
  \endgroup
}
\newcommand{\sjtu@bigabstract}[1]{\long\gdef\sjtu@bigabstract@body{#1}}
\NewDocumentEnvironment{bigabstract}{}{%
  \Collect@Body\sjtu@bigabstract
}{%
  \ifsjtu@degree@course\relax\else
    \ifsjtu@language@english\relax\else
      \AtEndDocument{%
        \cleardoublepage
        \pagenumbering{roman}
        \def\sjtu@thepage{\theCurrentPageLocal}
        \def\sjtu@lastpageref{\lastpageref{pagesLTS.roman.local}}
        \pdfbookmark[0]{\sjtu@name@bigabstract}{bigabstract}%
        \chapter*{\MakeUppercase\sjtu@info@title@en}
        \@mkboth{\sjtu@name@bigabstract}%
                {\sjtu@name@bigabstract}%
        \sjtu@bigabstract@body
      }
    \fi
  \fi
}
\RenewDocumentCommand\maketitle{}{%
  \pdfbookmark[0]{\sjtu@name@titlepage}{titlepage}
  \sjtu@makechinesetitle%
}
\newcommand{\sjtu@makechinesetitle}{%
  \cleardoublepage
  \thispagestyle{empty}
  \begin{center}
    \kaishu
    \vspace*{48pt}
    \includegraphics[height=96pt]{sjtu-vi-name-\sjtu@format@title@logo@color.pdf}
    \vskip 28pt
    {\fontsize{32}{32}\sjtu@name@subject@zh}
    \vskip 16pt
    {\zihao{-2}\MakeUppercase\sjtu@name@subject@en}
    \vskip 16pt
    \includegraphics[height=86pt]{sjtu-vi-badge-\sjtu@format@title@logo@color.pdf}
    \vskip \stretch{2}
    \begingroup
      \zihao{2}
      \begin{tabular}{r@{：}l}
        论文题目 &
        \begin{minipage}[t]{280pt}
          \zihao{-2}
          \begin{center}
            \sjtu@uline\sjtu@info@title
          \end{center}
        \end{minipage}
      \end{tabular}
    \endgroup
    \vskip \stretch{1}
    \begingroup
      \zihao{3}
      \def\arraystretch{1.1}
      \begin{tabular}
        {>{\begin{CJKfilltwosides}{4\ccwd}}r<{\end{CJKfilltwosides}}@{：}c}
        \sjtu@name@author@zh       & \sjtu@info@author      \\ \cline{2-2}
        \sjtu@name@id@zh           & \makebox[180pt]{\sjtu@info@id} \\
          \cline{2-2}
        \ifsjtu@degree@course
          \sjtu@name@coursename@zh & \sjtu@info@coursename  \\ \cline{2-2}
        \else
          \sjtu@name@major@zh      & \sjtu@info@major       \\ \cline{2-2}
        \fi
        \sjtu@name@supervisor@zh   & \sjtu@info@supervisor  \\ \cline{2-2}
        \sjtu@name@department@zh   & \sjtu@info@department  \\ \cline{2-2}
      \end{tabular}
    \endgroup
    \vskip 40pt
  \end{center}
  \cleardoublepage
}
\endinput
%%
%% End of file `sjtuthesis-undergraduate.ltx'.
